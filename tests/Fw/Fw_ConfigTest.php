<?php

/**
 * Test class for Config.
 * Generated by PHPUnit on 2011-11-22 at 00:29:40.
 */
class Fw_ConfigTest extends PHPUnit_Framework_TestCase {

	/**
	 * @var Fw_Config
	 */
	protected $object;

	/**
	 * 
	 */
	protected function setUp() {
		$this->object = new Fw_Config(array('db'=>array(
						'driver'=>'mysql',
						'server'=>'localhost',
						'port'=>'3306',
						'name'=>'hb_dev',
						'user'=>'root',
						'password'=>'root',
						'encoding'=>'utf8'
						)));
	}

	/**
	 * 
	 */
	protected function tearDown() {
		unset($this->object);
	}

	public function test__construct() {
		$this->assertInstanceOf('Fw_Config', $this->object);

		$obj = new Fw_Config(PATH_CONFIG . DIRECTORY_SEPARATOR . 'config.php');
		$this->assertTrue($obj instanceof Fw_Config);

		//	Testing constructor with array argument
		$obj = new Fw_Config(array('a'=>1));
		$this->assertTrue($obj instanceof Fw_Config);
	}

	/**
	 * 
	 */
	public function test__get() {
		$this->assertInstanceOf('Fw_Config', $this->object->db);
		$this->assertEquals('localhost', $this->object->db->server);
	}

	/**
	 */
	public function test__isset() {
		$this->assertTrue(isset($this->object->db));
		$this->assertFalse(isset($this->object->ababagalamaga));
	}

	/**
	 * @expectedException Fw_Exception_Config
	 */
	public function testException() {
		$this->object->ahaha;
	}

	/**
	 * @expectedException Fw_Exception_Config
	 */
	public function testExceptionIncorrectFilename() {
		//	Testing constructor with incorrect filename argument
		new Fw_Config(PATH_CONFIG . 'ababagalamaga.php');
	}

	public function testToArray() {
		$obj = new Fw_Config(array(
					'driver'=>'mysql',
					'server'=>'localhost',
					'port'=>'3306',
					'name'=>'hb_dev',
					'user'=>'root',
					'password'=>'root',
					'encoding'=>'utf8'
				));

		$this->assertEquals(array(
			'driver'=>'mysql',
			'server'=>'localhost',
			'port'=>'3306',
			'name'=>'hb_dev',
			'user'=>'root',
			'password'=>'root',
			'encoding'=>'utf8'
				), $obj->toArray());
	}

}